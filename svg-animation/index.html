<!DOCTYPE html>
<html>

  <head>
  <meta name="google-site-verification" content="nbQ3DH1tU2S227w0_LZKTOi0LhBBzGRYnN_ARxSDuYY" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>CSSアニメーションによるSVG pathの操作 | Kaffee Kantate</title>
  <meta name="description" content="stroke-dasharray/stroke-dashoffsetとfill-opacityによるアニメーション。">

  <link rel="stylesheet" href="/css/main.css?v=2">
  <link rel="canonical" href="https://blog.kaffeekantate.xyz/svg-animation/">
  <link rel="alternate" type="application/rss+xml" title="Kaffee Kantate" href="https://blog.kaffeekantate.xyz/feed.xml" />

  <meta property="og:title" content="CSSアニメーションによるSVG pathの操作 | Kaffee Kantate" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="stroke-dasharray/stroke-dashoffsetとfill-opacityによるアニメーション。" />
  <meta property="og:url" content="https://blog.kaffeekantate.xyz/svg-animation/" />
  <meta property="og:image" content="https://blog.kaffeekantate.xyz/images/2015/" />
  <meta property="og:site_name" content="Kaffee Kantate" />
  <meta property="fb:app_id" content="1127313860700848" />

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CSSアニメーションによるSVG pathの操作 | Kaffee Kantate">
  <meta name="twitter:description" content="stroke-dasharray/stroke-dashoffsetとfill-opacityによるアニメーション。">
  <meta name="twitter:image" content="https://blog.kaffeekantate.xyz/images/2015/">

  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <hgroup class="site-title-group">
    <h1 class="site-title"><a class="site-title" href="/">Kaffee Kantate</a></h1>
    <h3 class="site-subtitle">Life in Vancouver, Tech, Coffee, etc</h3>
    </hgroup>


    <nav class="site-nav">

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">CSSアニメーションによるSVG pathの操作</h1>
    <p class="post-meta">Jan 23, 2015</p>
    <div class="post-tag"><a href="/tag/css" rel="tag">css</a>, <a href="/tag/svg" rel="tag">svg</a></div>
  </header>

  <article class="post-content">
    <p>stroke-dasharray/stroke-dashoffsetを使ってSVGのpathをanimateさせようとした際の話。SVGアニメーションの基本については下記が参考になりました。</p>

<ul>
  <li>
    <p><a href="http://2ndidea.com/svg/svg-path-drawing-animation-even-ie/">SVGのアニメーションで線を引く方法まとめ（IEへの対応も 2.IDEA</a></p>
  </li>
  <li>
    <p><a href="http://mkasumi.com/entry-653.html">SVGのアニメーション mkasumi.com</a></p>
  </li>
</ul>

<p>typographyのアニメーションといえば<a href="http://carlphilippebrenner.com/portfolio/beatricecreations">Béatrice Créations</a>等が有名ですが、画像背景の上でアニメーションさせたいと思い</p>

<ul>
  <li>defaultではfill:”none”</li>
  <li>keyframesにてfill:”none”からfill:”#000”に変化</li>
  <li>animation-fill-mode:forwardsを設定</li>
</ul>

<p>を試しました。が…</p>

<p data-height="250" data-theme-id="0" data-slug-hash="gbRgKx" data-default-tab="result" data-user="kay8" class="codepen">See the Pen <a href="http://codepen.io/kay8/pen/gbRgKx/">Animate SVG Path: not working in FF</a> by Kei (<a href="http://codepen.io/kay8">@kay8</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async="" src="//assets.codepen.io/assets/embed/ei.js"></script>

<p>WebKitではfill=”#000”になるもののFireFoxでは変化せず。IEはそもそもanimationに対応していないので対象外。</p>

<p>調べてるとFirefoxのSVG関連バグについての投稿がいろいろでてきたためこれもバグだろと勝手に思ってましたが、W3Cの<a href="http://www.w3.org/TR/SVG/animate.html#AnimateElement">19.2.12 The ‘animate’ element</a>を読めと指摘される。。</p>

<p><code>Data type &lt;color&gt;</code>によると</p>

<blockquote>
  <p>Only additive if each value can be converted to an RGB color.</p>
</blockquote>

<p>ということで仕様上、noneは指定できないとのこと。WebKitの動きが特殊なだけだと判明。</p>

<h2 id="section">代替案1</h2>

<p>別のアニメーションを作りanimation-delayで開始時間をずらす。</p>

<p data-height="250" data-theme-id="0" data-slug-hash="mywXRg" data-default-tab="result" data-user="kay8" class="codepen">See the Pen <a href="http://codepen.io/kay8/pen/mywXRg/">Animate SVG Path: using 2 keyframes</a> by Kei (<a href="http://codepen.io/kay8">@kay8</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async="" src="//assets.codepen.io/assets/embed/ei.js"></script>

<h2 id="section-1">代替案2</h2>

<p>fill-opacityを0から1に変化させる。</p>

<div data-height="350" data-theme-id="0" data-slug-hash="GgEQra" data-default-tab="css" data-user="kay8" class="codepen"><pre><code>	.letter {
		position: relative;
		max-width: 1024px;
		margin: 0 auto;
	}
	.letter-svg {
		margin: 0 auto;
		position: relative;
		display: block;
	}

    .letter-svg-3 path{
        stroke:#000;
        fill:#000;
        fill-opacity:0;
        stroke-width:.2;
        stroke-dasharray: 800;
        stroke-dashoffset:800;
        -moz-animation:DASH3 3s ease-in-out 1s forwards;
        -webkit-animation:DASH3 3s ease-in-out 1s forwards;
        animation:DASH3 3s ease-in-out 1s forwards;
    }

    @-webkit-keyframes DASH3{
        0%  {stroke-dashoffset:800;}
		   80%  {stroke-dashoffset:0;fill-opacity:0;}
        100%{stroke-dashoffset:0;fill-opacity:1;}
    }
    @-moz-keyframes DASH3{
        0%  {stroke-dashoffset:800;}
		   80%  {stroke-dashoffset:0;fill-opacity:0;}
        100%{stroke-dashoffset:0;fill-opacity:1;}
    }</code></pre>
<p>See the Pen <a href="http://codepen.io/kay8/pen/GgEQra/">Animate SVG Path: using fill-opacity</a> by Kei (<a href="http://codepen.io/kay8">@kay8</a>) on <a href="http://codepen.io">CodePen</a>.</p>
</div>
<script async="" src="//assets.codepen.io/assets/embed/ei.js"></script>

<hr />
<p>次からはStack Overflowじゃなくて仕様読むようにします。。</p>

    <div class="social">
	<div class="fb-like social-button" data-href="https://developers.facebook.com/docs/plugins/" data-layout="button" data-action="like" data-show-faces="true" data-share="false" height="20"></div>

	<a href="https://twitter.com/share" class="twitter-share-button social-button" data-count="none">Tweet</a>

	<a href="http://b.hatena.ne.jp/entry/https://blog.kaffeekantate.xyz/svg-animation/" class="hatena-bookmark-button social-button" data-hatena-bookmark-layout="standard-noballoon" data-hatena-bookmark-lang="en" title="このエントリーをはてなブックマークに追加" target="_blank"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a>

</div>


  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">

      <div class="footer-col  footer-col-1">
        <h3>Tags</h3>
        <div class="footer-tags"><a href="/tag/advent" class="set-5">advent</a> <a href="/tag/art" class="set-1">art</a> <a href="/tag/bcit" class="set-4">bcit</a> <a href="/tag/cafe" class="set-1">cafe</a> <a href="/tag/coffee" class="set-4">coffee</a> <a href="/tag/css" class="set-4">css</a> <a href="/tag/english-article" class="set-1">english-article</a> <a href="/tag/font" class="set-1">font</a> <a href="/tag/github" class="set-1">github</a> <a href="/tag/javascript" class="set-2">javascript</a> <a href="/tag/jekyll" class="set-2">jekyll</a> <a href="/tag/montreal" class="set-1">montreal</a> <a href="/tag/museum" class="set-1">museum</a> <a href="/tag/music" class="set-3">music</a> <a href="/tag/svg" class="set-2">svg</a> <a href="/tag/trip" class="set-2">trip</a> <a href="/tag/vancouver" class="set-5">vancouver</a> <a href="/tag/%E5%BE%92%E7%84%B6" class="set-1">徒然</a> <a href="/tag/%E7%95%99%E5%AD%A6" class="set-4">留学</a></div>

      </div>


      <div class="footer-col  footer-col-2">
        <h3>Author</h3>
        <p class="text footer-info">Kay: System engineer in Tokyo -> Student at BCIT -> Web developer in Vancouver. Also writing a English blog in <a href="https://medium.com/@kay_ya">Medium</a></p>
        <ul class="contact-list">
          <li><a href="/feed.xml"><i class="fa fa-rss-square"></i></a></li>
          <li><a href="https://instagram.com/kay_ya8/" target="_blank"><i class="fa fa-instagram"></i></a></li>
          <li><a href="mailto:kay.yamagishi.work@gmail.com"><i class="fa fa-envelope-square"></i></a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text copyright">&copy; 2015 <a href="/">Kaffee Kantate</a>, Powered by <a href="http://jekyllrb.com/">Jekyll</a></p>
      </div>
    </div>

  </div>

</footer>


  </body>
      <script>
  	// Async Sharing Buttons
	(function(doc, script) {
	  var js,
	      fjs = doc.getElementsByTagName(script)[0],
	      frag = doc.createDocumentFragment(),
	      add = function(url, id) {
	          if (doc.getElementById(id)) {return;}
	          js = doc.createElement(script);
	          js.src = url;
	          id && (js.id = id);
	          frag.appendChild( js );
	      };

	    // Facebook SDK
	    add('//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=1420984721525609&version=v2.2', 'facebook-jssdk');
	    // Twitter SDK
	    add('//platform.twitter.com/widgets.js', 'tweetjs');

	    fjs.parentNode.insertBefore(frag, fjs);
	}(document, 'script'));


  	// Google Analystics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-47051831-3', 'auto');
    ga('send', 'pageview');

    // add target='_blank' when href has different hostname
    (function() {
		var links = document.links;
		for (var i = 0; i < links.length; i++) {
			if (links[i].hostname != window.location.hostname) {
				links[i].target = '_blank';
			}
		}
	}());

  </script>

  <script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
</html>
